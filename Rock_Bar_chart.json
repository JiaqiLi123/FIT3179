{
  "$schema": "https://vega.github.io/schema/vega-lite/v4.json",
  "description": "A simple bar chart with embedded data.",
  "width": 300,
  "title": "Types of rocks in volcanoes",
  "data": {
    "url": "https://raw.githubusercontent.com/JiaqiLi123/FIT379/master/Cleaned_data.csv"
  },
  "mark": "bar",
  "params": [
    {
      "name": "Rock_Type_selection",
      "bind": {
        "input": "select",
        "options": [
          null,
          "Andesite / Basaltic Andesite",
          "Basalt / Picro-Basalt",
          "Dacite",
          "Rhyolite",
          "Trachyte / Trachydacite",
          "Trachyandesite / Basaltic Trachyandesite",
          "Foidite",
          "Phonolite",
          "Phono-tephrite /  Tephri-phonolite"
        ],
        "labels": [
          "Show All",
          "Andesite / Basaltic Andesite",
          "Basalt / Picro-Basalt",
          "Dacite",
          "Rhyolite",
          "Trachyte / Trachydacite",
          "Trachyandesite / Basaltic Trachyandesite",
          "Foidite",
          "Phonolite",
          "Phono-tephrite /  Tephri-phonolite"
        ],
        "name": "Rock_Type Selection: "
      }
    }
  ],
  "transform": [
    {
      "filter": "Rock_Type_selection==null||datum.Dominant_Rock_Type==Rock_Type_selection"
    }
  ],
  "encoding": {
    "x": {
      "field": "Dominant_Rock_Type",
      "type": "nominal",
      "axis": {"labelAngle": 30},
      "sort": "-y",
      "title": "Rock type"
    },
    "y": {
      "field": "Dominant_Rock_Type",
      "type": "quantitative",
      "aggregate": "count",
      "title": "Number of volcanoes"
    },
    "tooltip": [
      {"field": "Dominant_Rock_Type", "type": "nominal","title":"Rock type"},
      {"field": "Dominant_Rock_Type", "type": "nominal", "aggregate": "count","title":"Number of volcanoes"}
    ]
  },
  "layer": [
    {"mark": "bar"},
    {
      "mark": {
        "type": "text",
        "align": "left",
        "baseline": "up",
        "dx": -10,
        "fontSize": 11.5,
        "fontStyle": "italic"
      },
      "encoding": {
        "text": {
          "field": "Dominant_Rock_Type",
          "aggregate": "count",
          "type": "nominal"
        },
        "color": {"value": "black"}
      }
    }
  ],
  "config": {}
}
